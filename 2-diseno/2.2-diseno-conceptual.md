# Diccionario de Datos - Sistema de Denuncias Ciudadanas

## Índice
1. [Módulo de Ciudadanos](#1-módulo-de-ciudadanos)
2. [Módulo de Personal Municipal](#2-módulo-de-personal-municipal)
3. Rafael Adriano Olivos Gallardo - [Módulo de Notificaciones](#3-módulo-de-notificaciones)
4. [Módulo Administrativo](#4-módulo-administrativo)
5. [Módulo de Reportes y Estadísticas](#5-módulo-de-reportes-y-estadísticas)
6. [Tipos de Relación](#tipos-de-relación)

---

## 1. Módulo de Ciudadanos

### 1.1. Entidad: Ciudadano

**Descripción:** Usuario del sistema que registra denuncias sobre problemas en el municipio.

**Propósito:** Gestionar la información de los denunciantes y permitir el seguimiento de sus denuncias.

**Reglas de negocio:**
- Cada ciudadano debe tener un DNI único.
- Puede registrar denuncias de forma anónima.
- Debe autenticarse con DNI y fecha de emisión.
- Puede tener múltiples denuncias registradas.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoCiudadano | Identificador único del ciudadano | Identificación interna | Texto | Sí | Sí | No | CIU-00001 |
| DNI | Documento Nacional de Identidad | Identificación legal | Texto(8) | Sí | Sí | No | 45678912 |
| Nombre | Nombre del ciudadano | Identificación | Texto | Sí | No | No | María |
| Apellido | Apellido del ciudadano | Identificación | Texto | Sí | No | No | González |
| Email | Correo electrónico | Comunicación | Email | No | Sí | No | maria.g@email.com |
| Telefono | Número de contacto | Comunicación | Texto | No | No | Sí | 987654321 |
| FechaEmisionDNI | Fecha de emisión del DNI | Autenticación | Fecha | Sí | No | No | 2020-05-15 |
| Direccion | Dirección del ciudadano | Ubicación | Texto | No | No | No | Jr. Lima 456 |
| FechaRegistro | Fecha de registro en el sistema | Control temporal | FechaHora | Sí | No | No | 2025-01-10 |
| EsAnonimo | Indica si la denuncia es anónima | Control privacidad | Booleano | Sí | No | No | false |
| EstadoCuenta | Estado de la cuenta | Control | Enumeración | Sí | No | No | Activo |

### 1.2. Entidad: Denuncia

**Descripción:** Registro de un problema o incidencia reportado por un ciudadano.

**Propósito:** Gestionar las denuncias ciudadanas desde su registro hasta su resolución.

**Reglas de negocio:**
- Cada denuncia debe tener un código único.
- Debe estar asociada a una categoría.
- Puede contener hasta 5 archivos adjuntos.
- Requiere una ubicación geográfica.
- El estado inicial es "Registrado".

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoDenuncia | Identificador único | Identificación | Texto | Sí | Sí | No | DEN-2025-00001 |
| Titulo | Título breve de la denuncia | Resumen | Texto(100) | Sí | No | No | Bache en Av. Principal |
| Descripcion | Descripción detallada del problema | Información | Texto | Sí | No | No | Bache grande que causa... |
| FechaRegistro | Fecha de registro | Control temporal | FechaHora | Sí | No | No | 2025-01-10 14:30:00 |
| FechaActualizacion | Última actualización | Control temporal | FechaHora | Sí | No | No | 2025-01-12 09:15:00 |
| Estado | Estado actual de la denuncia | Seguimiento | Enumeración | Sí | No | No | En revisión |
| Prioridad | Nivel de prioridad | Gestión | Enumeración | Sí | No | No | Media |
| EsAnonima | Indica si es anónima | Privacidad | Booleano | Sí | No | No | false |
| NumeroSeguimiento | Código para seguimiento público | Trazabilidad | Texto | Sí | Sí | No | SEG-ABC123456 |
| RequiereValidacion | Necesita doble autenticación | Control | Booleano | Sí | No | No | true |

### 1.3. Entidad: Categoria

**Descripción:** Clasificación temática de las denuncias.

**Propósito:** Organizar y categorizar las denuncias para su correcta asignación.

**Reglas de negocio:**
- Cada categoría debe tener un código único.
- Debe tener un área responsable asignada.
- Puede contener subcategorías.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoCategoria | Identificador único | Identificación | Texto | Sí | Sí | No | CAT-001 |
| Nombre | Nombre de la categoría | Identificación | Texto | Sí | Sí | No | Alumbrado Público |
| Descripcion | Descripción de la categoría | Información | Texto | No | No | No | Problemas con... |
| Color | Color para identificación visual | UI/UX | Texto | No | No | No | #FF5733 |
| Icono | Icono representativo | UI/UX | Texto | No | No | No | lightbulb |
| EstaActivo | Estado de la categoría | Control | Booleano | Sí | No | No | true |
| TiempoRespuestaPromedio | Tiempo promedio de atención | Planificación | Número | No | No | No | 72 |

### 1.4. Entidad: Evidencia

**Descripción:** Archivos multimedia adjuntos a una denuncia.

**Propósito:** Almacenar fotografías, videos o documentos que respalden la denuncia.

**Reglas de negocio:**
- Máximo 5 archivos por denuncia.
- Tamaño máximo por archivo según políticas de seguridad.
- Tipos permitidos: imágenes (JPG, PNG), videos (MP4), documentos (PDF).
- Los archivos deben ser escaneados antes de almacenarse.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoEvidencia | Identificador único | Identificación | Texto | Sí | Sí | No | EVI-00001 |
| NombreArchivo | Nombre original del archivo | Identificación | Texto | Sí | No | No | foto_bache.jpg |
| RutaAlmacenamiento | Ruta de almacenamiento encriptada | Almacenamiento | Texto | Sí | Sí | No | /encrypted/2025/01/... |
| TipoArchivo | Tipo MIME del archivo | Clasificación | Texto | Sí | No | No | image/jpeg |
| TamañoBytes | Tamaño en bytes | Control | Número | Sí | No | No | 2048576 |
| FechaCarga | Fecha de carga | Control temporal | FechaHora | Sí | No | No | 2025-01-10 14:32:00 |
| HashArchivo | Hash SHA-256 del archivo | Integridad | Texto | Sí | Sí | No | a3f5d8c9... |
| EstaEscaneado | Verificación antivirus | Seguridad | Booleano | Sí | No | No | true |

### 1.5. Entidad: Ubicacion

**Descripción:** Información geográfica de la denuncia.

**Propósito:** Geolocalizar las denuncias para análisis espacial y asignación.

**Reglas de negocio:**
- Debe contener coordenadas GPS o dirección.
- Debe pertenecer a una zona del municipio.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoUbicacion | Identificador único | Identificación | Texto | Sí | Sí | No | UBI-00001 |
| Latitud | Coordenada latitud | Geolocalización | Decimal | Sí | No | No | -12.046374 |
| Longitud | Coordenada longitud | Geolocalización | Decimal | Sí | No | No | -77.042793 |
| Direccion | Dirección textual | Ubicación | Texto | Sí | No | No | Av. Arequipa 1234 |
| Referencia | Referencia adicional | Ubicación | Texto | No | No | No | Frente al parque |
| Distrito | Distrito del municipio | Clasificación | Texto | Sí | No | No | Miraflores |
| CodigoPostal | Código postal | Clasificación | Texto | No | No | No | 15047 |

### 1.6. Entidad: Seguimiento

**Descripción:** Registro de cambios de estado y actualizaciones de la denuncia.

**Propósito:** Mantener trazabilidad completa de las acciones sobre cada denuncia.

**Reglas de negocio:**
- Se crea un registro cada vez que cambia el estado.
- Debe indicar quién realizó el cambio.
- Es inmutable una vez creado.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoSeguimiento | Identificador único | Identificación | Texto | Sí | Sí | No | SEG-00001 |
| EstadoAnterior | Estado previo | Historial | Enumeración | No | No | No | Registrado |
| EstadoNuevo | Estado actual | Historial | Enumeración | Sí | No | No | En revisión |
| FechaHora | Fecha y hora del cambio | Control temporal | FechaHora | Sí | No | No | 2025-01-11 10:00:00 |
| Comentario | Observación del cambio | Información | Texto | No | No | No | Asignado a área... |
| EsVisible | Visible para ciudadano | Control | Booleano | Sí | No | No | true |

---

## 2. Módulo de Personal Municipal

### 2.1. Entidad: PersonalMunicipal

**Descripción:** Empleados del municipio que gestionan las denuncias.

**Propósito:** Gestionar el personal responsable de atender y resolver denuncias.

**Reglas de negocio:**
- Cada personal debe tener un código único.
- Debe pertenecer a un área específica.
- Puede tener múltiples roles.
- Se especializa en: Operador, Supervisor, Técnico de Campo.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoPersonal | Identificador único | Identificación | Texto | Sí | Sí | No | PER-00001 |
| DNI | Documento de identidad | Identificación legal | Texto(8) | Sí | Sí | No | 87654321 |
| Nombre | Nombre del empleado | Identificación | Texto | Sí | No | No | Carlos |
| Apellido | Apellido del empleado | Identificación | Texto | Sí | No | No | Rodríguez |
| Email | Correo institucional | Comunicación | Email | Sí | Sí | No | crodriguez@muni.gob.pe |
| Telefono | Teléfono de contacto | Comunicación | Texto | Sí | No | Sí | 987123456 |
| Cargo | Cargo del empleado | Clasificación | Texto | Sí | No | No | Técnico |
| FechaIngreso | Fecha de ingreso | Control temporal | Fecha | Sí | No | No | 2023-05-10 |
| EstadoLaboral | Estado del empleado | Control | Enumeración | Sí | No | No | Activo |
| Especialidad | Área de especialización | Clasificación | Texto | No | No | No | Infraestructura |

### 2.2. Entidad: AreaResponsable

**Descripción:** Departamentos o áreas del municipio responsables de atender denuncias.

**Propósito:** Organizar la estructura municipal y asignar denuncias correctamente.

**Reglas de negocio:**
- Cada área debe tener un código único.
- Debe tener un jefe de área asignado.
- Puede gestionar múltiples categorías de denuncias.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoArea | Identificador único | Identificación | Texto | Sí | Sí | No | ARE-001 |
| Nombre | Nombre del área | Identificación | Texto | Sí | Sí | No | Obras Públicas |
| Descripcion | Descripción del área | Información | Texto | No | No | No | Responsable de... |
| Email | Correo del área | Comunicación | Email | Sí | Sí | No | obras@muni.gob.pe |
| Telefono | Teléfono del área | Comunicación | Texto | Sí | No | No | 01-4567890 |
| CapacidadMaxima | Denuncias máximas simultáneas | Planificación | Número | Sí | No | No | 50 |
| EstaActivo | Estado del área | Control | Booleano | Sí | No | No | true |

### 2.3. Entidad: Asignacion

**Descripción:** Registro de asignación de denuncias al personal o áreas.

**Propósito:** Gestionar la distribución de denuncias para su atención.

**Reglas de negocio:**
- Una denuncia puede ser reasignada múltiples veces.
- Debe registrar quién realizó la asignación.
- La asignación activa es la más reciente.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoAsignacion | Identificador único | Identificación | Texto | Sí | Sí | No | ASG-00001 |
| FechaAsignacion | Fecha de asignación | Control temporal | FechaHora | Sí | No | No | 2025-01-11 09:00:00 |
| MotivoAsignacion | Razón de la asignación | Información | Texto | No | No | No | Por especialidad |
| EsActiva | Indica si es la asignación actual | Control | Booleano | Sí | No | No | true |
| FechaFinalizacion | Fecha de cierre de asignación | Control temporal | FechaHora | No | No | No | 2025-01-15 17:00:00 |

### 2.4. Entidad: Tramitacion

**Descripción:** Proceso de gestión y resolución de una denuncia.

**Propósito:** Registrar las acciones tomadas para resolver la denuncia.

**Reglas de negocio:**
- Debe estar asociada a una asignación activa.
- Puede incluir evidencias de resolución.
- El estado debe actualizarse en tiempo real.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoTramitacion | Identificador único | Identificación | Texto | Sí | Sí | No | TRA-00001 |
| FechaInicio | Fecha de inicio | Control temporal | FechaHora | Sí | No | No | 2025-01-11 10:00:00 |
| FechaFinalizacion | Fecha de finalización | Control temporal | FechaHora | No | No | No | 2025-01-13 16:30:00 |
| AccionRealizada | Descripción de la acción | Información | Texto | Sí | No | No | Se reparó el bache... |
| Observaciones | Observaciones adicionales | Información | Texto | No | No | No | Se requirió material... |
| CostoEstimado | Costo de la intervención | Financiero | Decimal | No | No | No | 500.00 |
| EstadoTramitacion | Estado del trámite | Seguimiento | Enumeración | Sí | No | No | En proceso |

### 2.5. Entidad: Resolucion

**Descripción:** Resultado final de la atención de una denuncia.

**Propósito:** Documentar la solución o cierre de la denuncia.

**Reglas de negocio:**
- Una denuncia debe tener una resolución para cerrarse.
- Puede ser aprobada o rechazada.
- Debe incluir evidencia fotográfica si fue resuelta.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoResolucion | Identificador único | Identificación | Texto | Sí | Sí | No | RES-00001 |
| FechaResolucion | Fecha de resolución | Control temporal | FechaHora | Sí | No | No | 2025-01-13 17:00:00 |
| TipoResolucion | Tipo de resolución | Clasificación | Enumeración | Sí | No | No | Resuelta |
| DescripcionResolucion | Detalle de la resolución | Información | Texto | Sí | No | No | Problema solucionado... |
| TiempoTotal | Tiempo total de atención (horas) | Métrica | Número | Sí | No | No | 54 |
| CalificacionCiudadano | Calificación del ciudadano | Satisfacción | Número | No | No | No | 5 |
| ComentarioCiudadano | Comentario del ciudadano | Feedback | Texto | No | No | No | Excelente servicio |

### 2.6. Entidad: Comunicacion

**Descripción:** Mensajes intercambiados entre personal y ciudadanos.

**Propósito:** Facilitar la comunicación bidireccional durante el proceso de atención.

**Reglas de negocio:**
- Puede ser iniciada por el personal o el ciudadano.
- Debe estar asociada a una denuncia.
- Se registra fecha y hora de envío.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoComunicacion | Identificador único | Identificación | Texto | Sí | Sí | No | COM-00001 |
| Mensaje | Contenido del mensaje | Comunicación | Texto | Sí | No | No | Necesitamos más info... |
| FechaEnvio | Fecha y hora de envío | Control temporal | FechaHora | Sí | No | No | 2025-01-12 11:30:00 |
| TipoRemitente | Tipo de quien envía | Clasificación | Enumeración | Sí | No | No | Personal |
| EsLeido | Indica si fue leído | Control | Booleano | Sí | No | No | false |
| RequiereRespuesta | Solicita respuesta | Control | Booleano | Sí | No | No | true |

---

## 3. Módulo de Notificaciones

### 3.1. Entidad: Notificacion

**Descripción:** Mensaje enviado a usuarios sobre eventos del sistema.

**Propósito:** Mantener informados a los usuarios sobre cambios en sus denuncias.

**Reglas de negocio:**
- Se genera automáticamente según eventos configurados.
- Puede enviarse por múltiples canales.
- Debe registrar estado de entrega.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoNotificacion | Identificador único | Identificación | Texto | Sí | Sí | No | NOT-00001 |
| TipoNotificacion | Tipo de notificación | Clasificación | Enumeración | Sí | No | No | Cambio de estado |
| FechaCreacion | Fecha de creación | Control temporal | FechaHora | Sí | No | No | 2025-01-11 10:05:00 |
| FechaEnvio | Fecha de envío | Control temporal | FechaHora | No | No | No | 2025-01-11 10:06:00 |
| CanalEnvio | Canal utilizado | Medio | Enumeración | Sí | No | No | Email |
| EstadoEnvio | Estado del envío | Seguimiento | Enumeración | Sí | No | No | Enviado |
| MensajePersonalizado | Contenido del mensaje | Comunicación | Texto | Sí | No | No | Su denuncia ha sido... |
| IntentoEnvio | Número de intentos | Control | Número | Sí | No | No | 1 |

### 3.2. Entidad: PlantillaNotificacion

**Descripción:** Plantilla predefinida para generar notificaciones.

**Propósito:** Estandarizar el contenido de las notificaciones según el evento.

**Reglas de negocio:**
- Debe contener variables dinámicas.
- Puede ser personalizada por el administrador.
- Debe estar activa para ser utilizada.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoPlantilla | Identificador único | Identificación | Texto | Sí | Sí | No | PLT-001 |
| Nombre | Nombre de la plantilla | Identificación | Texto | Sí | Sí | No | Registro exitoso |
| TipoEvento | Evento que dispara | Clasificación | Enumeración | Sí | No | No | Registro |
| Asunto | Asunto del mensaje | Email | Texto | Sí | No | No | Denuncia registrada |
| CuerpoMensaje | Contenido de la plantilla | Comunicación | Texto | Sí | No | No | Estimado {nombre}... |
| Variables | Variables disponibles | Configuración | Texto | No | No | Sí | {nombre}, {codigo} |
| EstaActiva | Estado de la plantilla | Control | Booleano | Sí | No | No | true |

### 3.3. Entidad: ConfiguracionNotificacion

**Descripción:** Preferencias de notificación por usuario.

**Propósito:** Permitir a los usuarios configurar cómo recibir notificaciones.

**Reglas de negocio:**
- Cada usuario puede tener una configuración personalizada.
- Puede habilitar/deshabilitar canales específicos.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoConfiguracion | Identificador único | Identificación | Texto | Sí | Sí | No | CFG-00001 |
| RecibirEmail | Habilitar email | Configuración | Booleano | Sí | No | No | true |
| RecibirSMS | Habilitar SMS | Configuración | Booleano | Sí | No | No | false |
| RecibirPush | Habilitar notificaciones push | Configuración | Booleano | Sí | No | No | true |
| FrecuenciaResumen | Frecuencia de resúmenes | Configuración | Enumeración | Sí | No | No | Diario |
| HorarioPreferido | Horario para recibir | Configuración | Texto | No | No | No | 09:00-18:00 |

---

## 4. Módulo Administrativo

### 4.1. Entidad: Usuario

**Descripción:** Entidad general que representa cualquier usuario del sistema.

**Propósito:** Gestionar el acceso y autenticación de todos los usuarios.

**Reglas de negocio:**
- Cada usuario debe tener credenciales únicas.
- Debe tener al menos un rol asignado.
- Se especializa en: Ciudadano, PersonalMunicipal, Administrador, Auditor.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoUsuario | Identificador único | Identificación | Texto | Sí | Sí | No | USR-00001 |
| NombreUsuario | Nombre de usuario | Autenticación | Texto | Sí | Sí | No | jperez |
| PasswordHash | Contraseña hasheada | Seguridad | Texto | Sí | No | No | $2b$12$... |
| Email | Correo electrónico | Comunicación | Email | Sí | Sí | No | jperez@email.com |
| FechaCreacion | Fecha de creación | Control temporal | FechaHora | Sí | No | No | 2025-01-01 08:00:00 |
| UltimoAcceso | Último inicio de sesión | Auditoría | FechaHora | No | No | No | 2025-01-10 14:25:00 |
| EstadoCuenta | Estado de la cuenta | Control | Enumeración | Sí | No | No | Activo |
| IntentosLogin | Intentos fallidos de login | Seguridad | Número | Sí | No | No | 0 |
| FechaBloqueo | Fecha de bloqueo | Seguridad | FechaHora | No | No | No | null |
| RequiereMFA | Requiere autenticación 2FA | Seguridad | Booleano | Sí | No | No | false |

### 4.2. Entidad: Rol

**Descripción:** Rol de usuario en el sistema con permisos específicos.

**Propósito:** Implementar control de acceso basado en roles (RBAC).

**Reglas de negocio:**
- Cada rol tiene un conjunto único de permisos.
- Un usuario puede tener múltiples roles.
- Roles predefinidos: SuperAdmin, Administrador, Operador, Ciudadano, Auditor.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoRol | Identificador único | Identificación | Texto | Sí | Sí | No | ROL-001 |
| Nombre | Nombre del rol | Identificación | Texto | Sí | Sí | No | Operador |
| Descripcion | Descripción del rol | Información | Texto | No | No | No | Personal que gestiona... |
| Nivel | Nivel jerárquico | Jerarquía | Número | Sí | No | No | 2 |
| EsSistema | Rol del sistema (no editable) | Control | Booleano | Sí | No | No | true |
| EstaActivo | Estado del rol | Control | Booleano | Sí | No | No | true |

### 4.3. Entidad: Permiso

**Descripción:** Permiso específico para realizar acciones en el sistema.

**Propósito:** Definir granularmente qué acciones puede realizar cada rol.

**Reglas de negocio:**
- Los permisos son atómicos y específicos.
- Se agrupan por módulos del sistema.
- Pueden ser asignados a múltiples roles.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoPermiso | Identificador único | Identificación | Texto | Sí | Sí | No | PER-001 |
| Nombre | Nombre del permiso | Identificación | Texto | Sí | Sí | No | CREAR_DENUNCIA |
| Descripcion | Descripción del permiso | Información | Texto | No | No | No | Permite crear denuncias |
| Modulo | Módulo del sistema | Clasificación | Enumeración | Sí | No | No | Denuncias |
| Accion | Acción permitida | Operación | Enumeración | Sí | No | No | Crear |
| Recurso | Recurso sobre el que actúa | Entidad | Texto | Sí | No | No | Denuncia |

### 4.4. Entidad: Sesion

**Descripción:** Sesión activa de un usuario en el sistema.

**Propósito:** Gestionar las sesiones de usuario y tokens de autenticación.

**Reglas de negocio:**
- Cada sesión tiene un token único.
- Las sesiones expiran después de un tiempo de inactividad.
- Se debe registrar información de la sesión para auditoría.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoSesion | Identificador único | Identificación | Texto | Sí | Sí | No | SES-00001 |
| Token | Token de sesión | Autenticación | Texto | Sí | Sí | No | eyJhbGciOiJIUzI1... |
| FechaInicio | Fecha de inicio | Control temporal | FechaHora | Sí | No | No | 2025-01-10 14:25:00 |
| FechaExpiracion | Fecha de expiración | Control temporal | FechaHora | Sí | No | No | 2025-01-10 22:25:00 |
| DireccionIP | IP del usuario | Seguridad | Texto | Sí | No | No | 192.168.1.100 |
| UserAgent | Información del navegador | Auditoría | Texto | Sí | No | No | Mozilla/5.0... |
| EstaActiva | Estado de la sesión | Control | Booleano | Sí | No | No | true |
| UltimaActividad | Última actividad registrada | Monitoreo | FechaHora | Sí | No | No | 2025-01-10 18:15:00 |

### 4.5. Entidad: LogAuditoria

**Descripción:** Registro inmutable de todas las acciones críticas del sistema.

**Propósito:** Mantener trazabilidad completa para auditoría y cumplimiento legal.

**Reglas de negocio:**
- Todos los registros son inmutables.
- Se deben conservar por al menos 5 años.
- Incluye información detallada del contexto de la acción.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoLog | Identificador único | Identificación | Texto | Sí | Sí | No | LOG-00001 |
| TipoAccion | Tipo de acción realizada | Clasificación | Enumeración | Sí | No | No | CREAR |
| Modulo | Módulo del sistema | Clasificación | Texto | Sí | No | No | Denuncias |
| Entidad | Entidad afectada | Recurso | Texto | Sí | No | No | Denuncia |
| EntidadID | ID de la entidad | Referencia | Texto | Sí | No | No | DEN-2025-00001 |
| FechaHora | Fecha y hora de la acción | Temporal | FechaHora | Sí | No | No | 2025-01-10 14:30:00 |
| DireccionIP | IP del usuario | Seguridad | Texto | Sí | No | No | 192.168.1.100 |
| DatosAntes | Estado anterior (JSON) | Auditoría | Texto | No | No | No | {"estado":"Nuevo"} |
| DatosDespues | Estado posterior (JSON) | Auditoría | Texto | No | No | No | {"estado":"Revisión"} |
| Resultado | Resultado de la acción | Estado | Enumeración | Sí | No | No | Exitoso |
| MensajeError | Mensaje de error si aplica | Diagnóstico | Texto | No | No | No | null |

### 4.6. Entidad: Administrador

**Descripción:** Usuario con privilegios administrativos del sistema.

**Propósito:** Gestionar la configuración global y usuarios del sistema.

**Reglas de negocio:**
- Hereda todos los atributos de Usuario.
- Tiene acceso total al sistema.
- Puede ser SuperAdmin con privilegios adicionales.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| NivelAcceso | Nivel de privilegios | Control | Enumeración | Sí | No | No | SuperAdmin |
| PermiteCambiosPermanentes | Puede hacer cambios no reversibles | Seguridad | Booleano | Sí | No | No | true |

### 4.7. Entidad: Auditor

**Descripción:** Usuario especializado en revisión de logs y auditoría.

**Propósito:** Garantizar transparencia y cumplimiento normativo.

**Reglas de negocio:**
- Hereda todos los atributos de Usuario.
- Solo tiene permisos de lectura.
- No puede modificar datos del sistema.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| Institucion | Institución del auditor | Información | Texto | No | No | No | Contraloría |
| FechaInicioAuditoria | Inicio del período de auditoría | Control | Fecha | No | No | No | 2025-01-01 |
| FechaFinAuditoria | Fin del período de auditoría | Control | Fecha | No | No | No | 2025-12-31 |

---

## 5. Módulo de Reportes y Estadísticas

### 5.1. Entidad: Reporte

**Descripción:** Documento que consolida información analítica del sistema.

**Propósito:** Generar informes ejecutivos y operativos para toma de decisiones.

**Reglas de negocio:**
- Puede ser generado manual o automáticamente.
- Debe indicar el período de análisis.
- Puede exportarse en múltiples formatos.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoReporte | Identificador único | Identificación | Texto | Sí | Sí | No | REP-00001 |
| TipoReporte | Tipo de reporte | Clasificación | Enumeración | Sí | No | No | Ejecutivo |
| Nombre | Nombre del reporte | Identificación | Texto | Sí | No | No | Reporte mensual enero |
| Descripcion | Descripción del contenido | Información | Texto | No | No | No | Consolidado de... |
| FechaGeneracion | Fecha de generación | Control temporal | FechaHora | Sí | No | No | 2025-02-01 08:00:00 |
| FechaInicio | Inicio del período | Rango temporal | Fecha | Sí | No | No | 2025-01-01 |
| FechaFin | Fin del período | Rango temporal | Fecha | Sí | No | No | 2025-01-31 |
| FormatoExportacion | Formato de exportación | Configuración | Enumeración | Sí | No | No | PDF |
| RutaArchivo | Ruta del archivo generado | Almacenamiento | Texto | No | Sí | No | /reports/2025/01/... |
| EsPublico | Visible públicamente | Privacidad | Booleano | Sí | No | No | false |

### 5.2. Entidad: Estadistica

**Descripción:** Métricas y datos estadísticos del sistema.

**Propósito:** Almacenar indicadores clave de desempeño (KPIs).

**Reglas de negocio:**
- Se calcula periódicamente (diario, semanal, mensual).
- Puede ser agregada por diferentes dimensiones.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoEstadistica | Identificador único | Identificación | Texto | Sí | Sí | No | EST-00001 |
| TipoMetrica | Tipo de métrica | Clasificación | Enumeración | Sí | No | No | Tiempo respuesta |
| Valor | Valor calculado | Dato | Decimal | Sí | No | No | 48.5 |
| UnidadMedida | Unidad de la métrica | Referencia | Texto | Sí | No | No | horas |
| Periodo | Período de cálculo | Temporal | Enumeración | Sí | No | No | Mensual |
| FechaCalculo | Fecha de cálculo | Control temporal | FechaHora | Sí | No | No | 2025-02-01 00:00:00 |
| Categoria | Categoría analizada | Dimensión | Texto | No | No | No | Alumbrado |
| Area | Área analizada | Dimensión | Texto | No | No | No | Obras Públicas |
| Zona | Zona geográfica | Dimensión | Texto | No | No | No | Distrito Norte |

### 5.3. Entidad: Indicador

**Descripción:** Indicador de desempeño o KPI del sistema.

**Propósito:** Medir el rendimiento del sistema y áreas responsables.

**Reglas de negocio:**
- Debe tener valores mínimos y máximos aceptables.
- Se actualiza según frecuencia configurada.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoIndicador | Identificador único | Identificación | Texto | Sí | Sí | No | IND-001 |
| Nombre | Nombre del indicador | Identificación | Texto | Sí | Sí | No | Tasa de resolución |
| Descripcion | Descripción del indicador | Información | Texto | Sí | No | No | Porcentaje de denuncias... |
| Formula | Fórmula de cálculo | Configuración | Texto | Sí | No | No | (resueltas/total)*100 |
| ValorMinimo | Valor mínimo aceptable | Umbral | Decimal | No | No | No | 70.0 |
| ValorMaximo | Valor máximo esperado | Umbral | Decimal | No | No | No | 100.0 |
| ValorActual | Valor actual calculado | Métrica | Decimal | No | No | No | 85.5 |
| FrecuenciaActualizacion | Frecuencia de cálculo | Configuración | Enumeración | Sí | No | No | Diario |
| TipoVisualizacion | Tipo de gráfico | UI | Enumeración | Sí | No | No | Gauge |

### 5.4. Entidad: Dashboard

**Descripción:** Panel de control con visualización de indicadores.

**Propósito:** Presentar información consolidada de forma visual.

**Reglas de negocio:**
- Puede ser personalizado por rol.
- Actualización en tiempo real o programada.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoDashboard | Identificador único | Identificación | Texto | Sí | Sí | No | DSH-001 |
| Nombre | Nombre del dashboard | Identificación | Texto | Sí | Sí | No | Dashboard Ejecutivo |
| Descripcion | Descripción del contenido | Información | Texto | No | No | No | Vista general... |
| TipoDashboard | Tipo de dashboard | Clasificación | Enumeración | Sí | No | No | Ejecutivo |
| FrecuenciaActualizacion | Frecuencia de actualización | Configuración | Enumeración | Sí | No | No | Tiempo real |
| EsPublico | Visible públicamente | Privacidad | Booleano | Sí | No | No | true |
| OrdenVisualizacion | Orden de widgets | UI | Número | No | No | No | 1 |

### 5.5. Entidad: TendenciaGeografica

**Descripción:** Análisis de tendencias por zona geográfica.

**Propósito:** Identificar patrones espaciales de las denuncias.

**Reglas de negocio:**
- Se calcula por períodos definidos.
- Permite identificar zonas críticas.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoTendencia | Identificador único | Identificación | Texto | Sí | Sí | No | TEN-00001 |
| Zona | Zona geográfica | Ubicación | Texto | Sí | No | No | Distrito Centro |
| Distrito | Distrito municipal | Ubicación | Texto | Sí | No | No | Lima |
| CantidadDenuncias | Total de denuncias | Métrica | Número | Sí | No | No | 150 |
| CategoriaMasFrecuente | Categoría predominante | Análisis | Texto | Sí | No | No | Baches |
| TasaResolucion | Porcentaje de resolución | Métrica | Decimal | Sí | No | No | 82.5 |
| TiempoPromedioAtencion | Tiempo promedio en horas | Métrica | Decimal | Sí | No | No | 45.2 |
| PeriodoAnalisis | Período del análisis | Temporal | Texto | Sí | No | No | 2025-01 |
| NivelCriticidad | Nivel de criticidad de la zona | Clasificación | Enumeración | Sí | No | No | Media |

### 5.6. Entidad: RankingDesempeno

**Descripción:** Ranking de desempeño de áreas responsables.

**Propósito:** Comparar el rendimiento entre diferentes áreas.

**Reglas de negocio:**
- Se actualiza periódicamente.
- Considera múltiples métricas de desempeño.

| **Atributo** | **Descripción** | **Propósito** | **Dominio** | **Obligatorio** | **Único** | **Multivaluado** | **Ejemplo** |
|--------------|-----------------|---------------|-------------|-----------------|-----------|------------------|-------------|
| CodigoRanking | Identificador único | Identificación | Texto | Sí | Sí | No | RNK-00001 |
| PeriodoEvaluacion | Período evaluado | Temporal | Texto | Sí | No | No | 2025-01 |
| Posicion | Posición en el ranking | Clasificación | Número | Sí | No | No | 1 |
| PuntajeTotal | Puntaje total obtenido | Métrica | Decimal | Sí | No | No | 95.5 |
| DenunciasAtendidas | Total de denuncias atendidas | Métrica | Número | Sí | No | No | 120 |
| TasaResolucionArea | Tasa de resolución del área | Métrica | Decimal | Sí | No | No | 88.3 |
| TiempoPromedioArea | Tiempo promedio del área | Métrica | Decimal | Sí | No | No | 38.5 |
| CalificacionPromedio | Calificación promedio ciudadana | Satisfacción | Decimal | No | No | No | 4.5 |

---

## Tipos de Relación

### 1. Relación: Ciudadano registra Denuncia

**Entidades participantes:** Ciudadano (1) — Denuncia (N)

**Descripción:** Los ciudadanos registran denuncias en el sistema.

**Propósito:** Registrar la autoría de cada denuncia.

**Reglas de negocio relevantes:**
- Un ciudadano puede registrar múltiples denuncias.
- Una denuncia puede ser anónima (sin ciudadano identificado).
- El ciudadano puede consultar solo sus propias denuncias.

**Cardinalidades:**
- Ciudadano (0,N)
- Denuncia (0,1) [0 para denuncias anónimas]

**Justificación:** Relación fundamental para vincular denunciantes con denuncias, permitiendo anonimato.

---

### 2. Relación: Denuncia tiene Categoria

**Entidades participantes:** Denuncia (N) — Categoria (1)

**Descripción:** Cada denuncia pertenece a una categoría específica.

**Propósito:** Clasificar y organizar las denuncias para su gestión.

**Reglas de negocio relevantes:**
- Toda denuncia debe tener exactamente una categoría.
- Una categoría puede tener múltiples denuncias.

**Cardinalidades:**
- Denuncia (1,1)
- Categoria (0,N)

**Justificación:** Clasificación obligatoria para enrutamiento y análisis.

---

### 3. Relación: Denuncia contiene Evidencia

**Entidades participantes:** Denuncia (1) — Evidencia (N)

**Descripción:** Una denuncia puede contener múltiples archivos de evidencia.

**Propósito:** Respaldar las denuncias con documentación visual.

**Reglas de negocio relevantes:**
- Una denuncia puede tener de 0 a 5 evidencias.
- Cada evidencia pertenece a una única denuncia.

**Cardinalidades:**
- Denuncia (1,1)
- Evidencia (0,5)

**Justificación:** Restricción de máximo 5 archivos por requerimientos del sistema (RF-08).

---

### 4. Relación: Denuncia ubicada en Ubicacion

**Entidades participantes:** Denuncia (N) — Ubicacion (1)

**Descripción:** Cada denuncia tiene una ubicación geográfica asociada.

**Propósito:** Geolocalizar las denuncias para análisis espacial y asignación.

**Reglas de negocio relevantes:**
- Toda denuncia debe tener exactamente una ubicación.
- Una ubicación puede corresponder a múltiples denuncias.

**Cardinalidades:**
- Denuncia (1,1)
- Ubicacion (0,N)

**Justificación:** Geolocalización obligatoria para gestión territorial (RF-09).

---

### 5. Relación: Denuncia genera Seguimiento

**Entidades participantes:** Denuncia (1) — Seguimiento (N)

**Descripción:** Cada cambio de estado genera un registro de seguimiento.

**Propósito:** Mantener trazabilidad completa de la denuncia.

**Reglas de negocio relevantes:**
- Una denuncia puede tener múltiples registros de seguimiento.
- Cada seguimiento pertenece a una única denuncia.
- Los seguimientos son inmutables.

**Cardinalidades:**
- Denuncia (1,1)
- Seguimiento (0,N)

**Justificación:** Historial completo para auditoría y transparencia (RF-11).

---

### 6. Relación: Categoria asignada a AreaResponsable

**Entidades participantes:** Categoria (N) — AreaResponsable (1)

**Descripción:** Cada categoría es responsabilidad de un área específica.

**Propósito:** Establecer responsabilidades organizacionales.

**Reglas de negocio relevantes:**
- Una categoría debe tener un área responsable.
- Un área puede gestionar múltiples categorías.

**Cardinalidades:**
- Categoria (1,1)
- AreaResponsable (0,N)

**Justificación:** Enrutamiento automático según especialización (RF-14).

---

### 7. Relación: PersonalMunicipal pertenece a AreaResponsable

**Entidades participantes:** PersonalMunicipal (N) — AreaResponsable (1)

**Descripción:** El personal municipal pertenece a un área específica.

**Propósito:** Organizar la estructura organizacional del municipio.

**Reglas de negocio relevantes:**
- Cada personal debe pertenecer a un área.
- Un área tiene múltiples miembros de personal.

**Cardinalidades:**
- PersonalMunicipal (1,1)
- AreaResponsable (0,N)

**Justificación:** Estructura jerárquica necesaria para asignación.

---

### 8. Relación: PersonalMunicipal crea Asignacion

**Entidades participantes:** PersonalMunicipal (1) — Asignacion (N)

**Descripción:** El personal municipal asigna denuncias.

**Propósito:** Registrar quién realiza las asignaciones.

**Reglas de negocio relevantes:**
- Un personal puede crear múltiples asignaciones.
- Cada asignación es creada por un personal específico.

**Cardinalidades:**
- PersonalMunicipal (0,N) [quien asigna]
- Asignacion (1,1)

**Justificación:** Trazabilidad de responsabilidades (RF-14).

---

### 9. Relación: Denuncia tiene Asignacion

**Entidades participantes:** Denuncia (1) — Asignacion (N)

**Descripción:** Una denuncia puede tener múltiples asignaciones (reasignaciones).

**Propósito:** Gestionar el flujo de trabajo y reasignaciones.

**Reglas de negocio relevantes:**
- Una denuncia puede tener múltiples asignaciones a lo largo del tiempo.
- La asignación activa es la más reciente.

**Cardinalidades:**
- Denuncia (1,1)
- Asignacion (1,N)

**Justificación:** Permite reasignación entre áreas (RF-17).

---

### 10. Relación: Asignacion asignada a PersonalMunicipal

**Entidades participantes:** Asignacion (N) — PersonalMunicipal (1)

**Descripción:** Una asignación es recibida por un personal específico.

**Propósito:** Identificar el responsable de atender la denuncia.

**Reglas de negocio relevantes:**
- Una asignación debe tener un personal asignado.
- Un personal puede tener múltiples asignaciones.

**Cardinalidades:**
- Asignacion (1,1)
- PersonalMunicipal (0,N) [quien recibe]

**Justificación:** Responsabilidad individual de atención (RF-13).

---

### 11. Relación: Asignacion genera Tramitacion

**Entidades participantes:** Asignacion (1) — Tramitacion (1)

**Descripción:** Cada asignación activa genera un proceso de tramitación.

**Propósito:** Documentar las acciones realizadas.

**Reglas de negocio relevantes:**
- Una asignación activa tiene una tramitación asociada.
- Una tramitación pertenece a una única asignación.

**Cardinalidades:**
- Asignacion (1,1)
- Tramitacion (0,1) [0 si no se ha iniciado]

**Justificación:** Proceso secuencial de gestión (RF-15).

---

### 12. Relación: Tramitacion adjunta Evidencia (Resolución)

**Entidades participantes:** Tramitacion (1) — Evidencia (N)

**Descripción:** El personal adjunta evidencias de resolución.

**Propósito:** Documentar las acciones correctivas realizadas.

**Reglas de negocio relevantes:**
- Una tramitación puede tener múltiples evidencias.
- Las evidencias comprueban la resolución.

**Cardinalidades:**
- Tramitacion (1,1)
- Evidencia (0,N)

**Justificación:** Comprobación de resolución (RF-16).

---

### 13. Relación: Tramitacion produce Resolucion

**Entidades participantes:** Tramitacion (1) — Resolucion (1)

**Descripción:** Una tramitación finaliza con una resolución.

**Propósito:** Formalizar el cierre de la denuncia.

**Reglas de negocio relevantes:**
- Una tramitación completada debe tener una resolución.
- Una resolución cierra una única tramitación.

**Cardinalidades:**
- Tramitacion (1,1)
- Resolucion (0,1) [0 si está en proceso]

**Justificación:** Cierre formal del proceso (RF-15).

---

### 14. Relación: PersonalMunicipal envía Comunicacion

**Entidades participantes:** PersonalMunicipal (1) — Comunicacion (N)

**Descripción:** El personal puede enviar mensajes a ciudadanos.

**Propósito:** Facilitar comunicación bidireccional.

**Reglas de negocio relevantes:**
- Un personal puede enviar múltiples comunicaciones.
- Cada comunicación tiene un único remitente.

**Cardinalidades:**
- PersonalMunicipal (0,N)
- Comunicacion (1,1)

**Justificación:** Comunicación proactiva con ciudadanos (RF-19, RF-20).

---

### 15. Relación: Denuncia tiene Comunicacion

**Entidades participantes:** Denuncia (1) — Comunicacion (N)

**Descripción:** Las comunicaciones están asociadas a denuncias específicas.

**Propósito:** Contextualizar los mensajes.

**Reglas de negocio relevantes:**
- Una denuncia puede tener múltiples comunicaciones.
- Cada comunicación pertenece a una denuncia.

**Cardinalidades:**
- Denuncia (1,1)
- Comunicacion (0,N)

**Justificación:** Historial de comunicación por denuncia (RF-19).

---

### 16. Relación: Denuncia genera Notificacion

**Entidades participantes:** Denuncia (1) — Notificacion (N)

**Descripción:** Los eventos de una denuncia generan notificaciones.

**Propósito:** Mantener informados a los usuarios.

**Reglas de negocio relevantes:**
- Una denuncia puede generar múltiples notificaciones.
- Cada notificación se asocia a una denuncia.

**Cardinalidades:**
- Denuncia (1,1)
- Notificacion (0,N)

**Justificación:** Sistema de alertas automáticas (RF-01, RF-02).

---

### 17. Relación: Usuario recibe Notificacion

**Entidades participantes:** Usuario (1) — Notificacion (N)

**Descripción:** Las notificaciones son enviadas a usuarios específicos.

**Propósito:** Entregar información personalizada.

**Reglas de negocio relevantes:**
- Un usuario puede recibir múltiples notificaciones.
- Cada notificación tiene un destinatario.

**Cardinalidades:**
- Usuario (1,1)
- Notificacion (0,N)

**Justificación:** Notificaciones personalizadas (RF-01).

---

### 18. Relación: Notificacion usa PlantillaNotificacion

**Entidades participantes:** Notificacion (N) — PlantillaNotificacion (1)

**Descripción:** Las notificaciones se generan desde plantillas.

**Propósito:** Estandarizar los mensajes.

**Reglas de negocio relevantes:**
- Una notificación usa una plantilla específica.
- Una plantilla puede generar múltiples notificaciones.

**Cardinalidades:**
- Notificacion (1,1)
- PlantillaNotificacion (0,N)

**Justificación:** Mensajes estandarizados configurables (RF-02, RF-27).

---

### 19. Relación: Usuario tiene ConfiguracionNotificacion

**Entidades participantes:** Usuario (1) — ConfiguracionNotificacion (1)

**Descripción:** Cada usuario tiene preferencias de notificación.

**Propósito:** Personalizar la forma de recibir alertas.

**Reglas de negocio relevantes:**
- Cada usuario tiene una configuración única.
- La configuración es opcional.

**Cardinalidades:**
- Usuario (1,1)
- ConfiguracionNotificacion (0,1)

**Justificación:** Preferencias personalizadas de comunicación.

---

### 20. Relación: Usuario tiene Rol

**Entidades participantes:** Usuario (N) — Rol (M)

**Descripción:** Los usuarios tienen uno o más roles asignados.

**Propósito:** Implementar RBAC (Control de Acceso Basado en Roles).

**Reglas de negocio relevantes:**
- Un usuario puede tener múltiples roles.
- Un rol puede ser asignado a múltiples usuarios.
- **Esta relación N:M se implementa mediante una tabla auxiliar con el atributo FechaAsignacion.**

**Cardinalidades:**
- Usuario (1,N)
- Rol (1,N)

**Atributos de la relación:**
- FechaAsignacion (FechaHora)
- EsActivo (Booleano)

**Justificación:** Gestión flexible de permisos (RF-22, RS-05).

---

### 21. Relación: Rol tiene Permiso

**Entidades participantes:** Rol (N) — Permiso (M)

**Descripción:** Los roles tienen conjuntos de permisos específicos.

**Propósito:** Definir qué acciones puede realizar cada rol.

**Reglas de negocio relevantes:**
- Un rol puede tener múltiples permisos.
- Un permiso puede pertenecer a múltiples roles.
- **Esta relación N:M se implementa mediante una tabla auxiliar.**

**Cardinalidades:**
- Rol (1,N)
- Permiso (1,N)

**Justificación:** Granularidad en control de acceso (RF-22, RS-05).

---

### 22. Relación: Usuario tiene Sesion

**Entidades participantes:** Usuario (1) — Sesion (N)

**Descripción:** Los usuarios pueden tener múltiples sesiones activas.

**Propósito:** Gestionar el acceso concurrente.

**Reglas de negocio relevantes:**
- Un usuario puede tener múltiples sesiones.
- Cada sesión pertenece a un único usuario.

**Cardinalidades:**
- Usuario (0,N)
- Sesion (1,1)

**Justificación:** Gestión de tokens y timeout (RS-04).

---

### 23. Relación: Usuario genera LogAuditoria

**Entidades participantes:** Usuario (1) — LogAuditoria (N)

**Descripción:** Todas las acciones de usuarios se registran en logs.

**Propósito:** Auditoría completa del sistema.

**Reglas de negocio relevantes:**
- Un usuario genera múltiples logs.
- Cada log registra la acción de un usuario.
- Los logs son inmutables.

**Cardinalidades:**
- Usuario (1,1)
- LogAuditoria (0,N)

**Justificación:** Trazabilidad completa (RS-06, RS-27, RGL-04).

---

### 24. Relación: Estadistica pertenece a Reporte

**Entidades participantes:** Estadistica (N) — Reporte (1)

**Descripción:** Los reportes consolidan múltiples estadísticas.

**Propósito:** Organizar información analítica.

**Reglas de negocio relevantes:**
- Un reporte puede contener múltiples estadísticas.
- Una estadística puede estar en múltiples reportes.

**Cardinalidades:**
- Estadistica (0,N)
- Reporte (0,N)

**Justificación:** Consolidación flexible de datos (RF-23, RF-24).

---

### 25. Relación: Dashboard contiene Indicador

**Entidades participantes:** Dashboard (N) — Indicador (M)

**Descripción:** Los dashboards visualizan múltiples indicadores.

**Propósito:** Presentar información consolidada.

**Reglas de negocio relevantes:**
- Un dashboard puede contener múltiples indicadores.
- Un indicador puede aparecer en múltiples dashboards.
- **Esta relación N:M se implementa mediante una tabla auxiliar con el atributo Orden.**

**Cardinalidades:**
- Dashboard (1,N)
- Indicador (1,N)

**Atributos de la relación:**
- Orden (Número)
- TipoVisualizacion (Enumeración)

**Justificación:** Dashboards personalizables (RF-23).

---

### 26. Relación: AreaResponsable tiene RankingDesempeno

**Entidades participantes:** AreaResponsable (1) — RankingDesempeno (N)

**Descripción:** Las áreas tienen rankings de desempeño periódicos.

**Propósito:** Evaluar y comparar rendimiento.

**Reglas de negocio relevantes:**
- Un área puede tener múltiples rankings (uno por período).
- Cada ranking evalúa una única área.

**Cardinalidades:**
- AreaResponsable (1,1)
- RankingDesempeno (0,N)

**Justificación:** Métricas de desempeño por área (RF-26).

---

### 27. Relación: Ubicacion genera TendenciaGeografica

**Entidades participantes:** Ubicacion (N) — TendenciaGeografica (1)

**Descripción:** Las ubicaciones se agregan en tendencias geográficas.

**Propósito:** Análisis espacial de denuncias.

**Reglas de negocio relevantes:**
- Múltiples ubicaciones generan una tendencia.
- Una tendencia analiza una zona específica.

**Cardinalidades:**
- Ubicacion (0,N)
- TendenciaGeografica (1,1)

**Justificación:** Análisis por zona geográfica (RF-25).

---

### 28. Relación: Ciudadano ES UNA INSTANCIA DE Usuario

**Descripción:** Relación de especialización donde Ciudadano hereda de Usuario.

**Propósito:** Representar la jerarquía de usuarios ciudadanos.

**Reglas de negocio relevantes:**
- No todos los usuarios son ciudadanos.
- Un ciudadano hereda todos los atributos de usuario.

**Cardinalidades:**
- Usuario (1,1)
- Ciudadano (0,1)

**Justificación:** Herencia completa para autenticación unificada (RF-03).

---

### 29. Relación: PersonalMunicipal ES UNA INSTANCIA DE Usuario

**Descripción:** Relación de especialización donde PersonalMunicipal hereda de Usuario.

**Propósito:** Representar la jerarquía de usuarios del personal.

**Reglas de negocio relevantes:**
- No todos los usuarios son personal municipal.
- El personal municipal hereda todos los atributos de usuario.

**Cardinalidades:**
- Usuario (1,1)
- PersonalMunicipal (0,1)

**Justificación:** Herencia completa para gestión unificada de usuarios (RF-21).

---

### 30. Relación: Administrador ES UNA INSTANCIA DE Usuario

**Descripción:** Relación de especialización donde Administrador hereda de Usuario.

**Propósito:** Representar la jerarquía de usuarios administradores.

**Reglas de negocio relevantes:**
- No todos los usuarios son administradores.
- Un administrador hereda todos los atributos de usuario.

**Cardinalidades:**
- Usuario (1,1)
- Administrador (0,1)

**Justificación:** Herencia para privilegios administrativos (RF-21, RF-22).

---

### 31. Relación: Auditor ES UNA INSTANCIA DE Usuario

**Descripción:** Relación de especialización donde Auditor hereda de Usuario.

**Propósito:** Representar la jerarquía de usuarios auditores.

**Reglas de negocio relevantes:**
- No todos los usuarios son auditores.
- Un auditor solo tiene permisos de lectura.

**Cardinalidades:**
- Usuario (1,1)
- Auditor (0,1)

**Justificación:** Herencia para acceso de solo lectura (RGL-04, RS-27).

---

## Diagrama de Relaciones de Cardinalidad

```
Ciudadano (0,N) ←→ (0,1) Denuncia
Denuncia (1,1) ←→ (0,N) Categoria
Denuncia (1,1) ←→ (0,5) Evidencia
Denuncia (1,1) ←→ (0,N) Ubicacion
Denuncia (1,1) ←→ (0,N) Seguimiento
Denuncia (1,1) ←→ (1,N) Asignacion
Denuncia (1,1) ←→ (0,N) Comunicacion
Denuncia (1,1) ←→ (0,N) Notificacion

Categoria (1,1) ←→ (0,N) AreaResponsable
PersonalMunicipal (1,1) ←→ (0,N) AreaResponsable
PersonalMunicipal (0,N) ←→ (1,1) Asignacion [crea]
PersonalMunicipal (0,N) ←→ (1,1) Asignacion [recibe]
PersonalMunicipal (0,N) ←→ (1,1) Comunicacion

Asignacion (1,1) ←→ (0,1) Tramitacion
Tramitacion (1,1) ←→ (0,N) Evidencia [resolución]
Tramitacion (1,1) ←→ (0,1) Resolucion

Usuario (1,1) ←→ (0,N) Notificacion
Usuario (1,1) ←→ (0,1) ConfiguracionNotificacion
Usuario (1,N) ←→ (1,N) Rol [N:M]
Usuario (0,N) ←→ (1,1) Sesion
Usuario (1,1) ←→ (0,N) LogAuditoria

Rol (1,N) ←→ (1,N) Permiso [N:M]
Notificacion (1,1) ←→ (0,N) PlantillaNotificacion

Estadistica (0,N) ←→ (0,N) Reporte
Dashboard (1,N) ←→ (1,N) Indicador [N:M]
AreaResponsable (1,1) ←→ (0,N) RankingDesempeno
Ubicacion (0,N) ←→ (1,1) TendenciaGeografica

Usuario (1,1) ⊲ Ciudadano (0,1) [Herencia]
Usuario (1,1) ⊲ PersonalMunicipal (0,1) [Herencia]
Usuario (1,1) ⊲ Administrador (0,1) [Herencia]
Usuario (1,1) ⊲ Auditor (0,1) [Herencia]
```

---

## Notas Adicionales

### Enumeraciones Principales

**EstadoDenuncia:**
- Registrado
- En revisión
- Asignado
- En proceso
- Resuelta
- Rechazada
- Cerrada

**Prioridad:**
- Baja
- Media
- Alta
- Urgente

**EstadoUsuario:**
- Activo
- Inactivo
- Suspendido
- Bloqueado

**TipoResolucion:**
- Resuelta
- Rechazada
- Duplicada
- No procede

**CanalNotificacion:**
- Email
- SMS
- Push
- Interno

**EstadoNotificacion:**
- Pendiente
- Enviado
- Entregado
- Fallido
- Leído

**TipoAccion (LogAuditoria):**
- CREAR
- ACTUALIZAR
- ELIMINAR
- LEER
- LOGIN
- LOGOUT

**Módulos del Sistema:**
- Ciudadanos
- Personal Municipal
- Notificaciones
- Administrativo
- Reportes

---

## Consideraciones de Seguridad y Privacidad

1. **Anonimización:** El sistema debe permitir denuncias completamente anónimas sin revelar identidad (RF-04, RS-21).

2. **Encriptación:** Todos los datos sensibles deben estar encriptados en reposo y en tránsito (RS-07, RS-08).

3. **Auditoría:** Todas las acciones críticas deben quedar registradas en logs inmutables (RS-27, RGL-04).

4. **Control de Acceso:** Implementar RBAC con permisos granulares (RS-05).

5. **Retención de Datos:** Los datos deben conservarse por al menos 5 años según normativa (RGL-03).

6. **WCAG 2.1 Nivel AA:** La interfaz debe cumplir con estándares de accesibilidad (RNF-10).

---

## Cumplimiento Normativo

- **Ley N° 29733:** Protección de Datos Personales (RGL-01)
- **Ley de Transparencia:** Acceso a la Información Pública (RGL-02)
- **Normativa de Retención:** Mínimo 5 años (RGL-03)
- **Auditoría Completa:** Todas las acciones administrativas (RGL-04)

---